<?php

/**
 * Implements hook_block_info().
 */
function nefo_blocks_builder_block_info() {
  $blocks = array();

  $blocks['nefo_footer_banner'] = array(
    'info' => t('NeFo Footer Banner'),
  );
  
  $blocks['nefo_feature_map'] = array(
    'info' => t('Researchmap'),
    'description' => t('A block to feature the research map on the frontpage'),
  );

  $blocks['nefo_newsletter2go_biodiv_news'] = array(
    'info' => t('Newsletter2Go Biodiv News'),
    'description' => t('Newsletter subscription form for Biodiv News'),
  );
  $blocks['nefo_newsletter2go_ipbes_news'] = array(
    'info' => t('Newsletter2Go IPBES News'),
    'description' => t('Newsletter subscription form for IPBES News'),
  );
  $blocks['nefo_newsletter2go_press_news'] = array(
    'info' => t('Newsletter2Go Press News'),
    'description' => t('Newsletter subscription form for Press News'),
  );
  
  $blocks['nefo_sidebar_banner'] = array(
    'info' => t('NeFo Sidebar Banner'),
  );
  
  $blocks['nefo_language_switch'] = array(
    'info' => t('NeFo Language Switch'),
  );
  
  return $blocks;
}

/**
* Implements hook_block_view().
*/
function nefo_blocks_builder_block_view($delta = '') {
  $block = array();

  switch ($delta) {
    case 'nefo_footer_banner':
      $block['subject'] = '';
      $block['content'] = _nefo_blocks_builder_nefo_footer_banner_content();
      break;
    case 'nefo_feature_map':
      $block['subject'] = '';
      $block['content'] = _nefo_blocks_builder_nefo_feature_map_content();
      break;
    case 'nefo_newsletter2go_biodiv_news':
      $block['subject'] = t('Biodiversity Research Newsletter');
      $block['content'] = _nefo_newsletter2go_biodiv_news_content();
      break;
    case 'nefo_newsletter2go_ipbes_news':
      $block['subject'] = t('IPBES Newsletter');      
      $block['content'] = _nefo_newsletter2go_ipbes_news_content();
      break;
    case 'nefo_newsletter2go_press_news':
      //$block['subject'] = t('Press Distribution');
      //$block['content'] = _nefo_newsletter2go_press_news_content();
      $block['content'] = _nefo_newsletter2go_press_news_button_content();
      break;
    case 'nefo_sidebar_banner':
      $block['subject'] = '';
      $block['content'] = _nefo_blocks_builder_nefo_sidebar_banner_content();
      break;
    case 'nefo_language_switch':
      $block['subject'] = '';
      $block['content'] = _nefo_blocks_builder_nefo_language_switch_content();
      break;
  }

  return $block;
}

function _nefo_blocks_builder_nefo_footer_banner_content() {
  $output = '<div class="nefo-footer-banner">
        <div class="nefo-footer-banner-col"><div class="nefo-footer-banner-col1">
            <div class="nefo-footer-banner-col-link"><a href="/schnittstellen/produkte"></a></div>
            <a href="/schnittstellen/produkte">'. t('NeFo Products') .'</a>
        </div></div>
        <div class="nefo-footer-banner-col"><div class="nefo-footer-banner-col2">
            <div class="nefo-footer-banner-col-link"><a href="/schnittstellen/workshops"></a></div>
            <a href="/schnittstellen/produkte/workshops">'. t('Workshops') .'</a>
        </div></div>
        <div class="nefo-footer-banner-col"><div class="nefo-footer-banner-col3">
            <div class="nefo-footer-banner-col-link"><a href="/newsletter"></a></div>
            <a href="/newsletter">'. t('Newsletter') .'</a>
        </div></div>
        <div class="nefo-footer-banner-col"><div class="nefo-footer-banner-col4">
            <div class="nefo-footer-banner-col-link"><a href="/blogs"></a></div>
            <a href="/blogs">'. t('NeFo Blogs') .'</a>
        </div></div>
      </div>';
  
  return $output;
}

function _nefo_blocks_builder_nefo_sidebar_banner_content() {
  $img_path = '/'. drupal_get_path('theme', 'ofen') .'/images/icons';
  
  $output = '<div class="nefo-sidebar-banner">
        <div class="nefo-sidebar-banner-row">
            <span class="nefo-sidebar-banner-row-img">
                <a href="/schnittstellen/produkte"><img src="'. $img_path .'/publikationen.png"></img></a>
            </span>
            <span class="nefo-sidebar-banner-row-link">
                <a href="/schnittstellen/produkte">'. t('NeFo Products') .'</a>
            </span>
        </div>        
        <div class="nefo-sidebar-banner-row">
            <span class="nefo-sidebar-banner-row-img">
                <a href="/schnittstellen/produkte/workshops"><img src="'. $img_path .'/workshops.png"></img></a>
            </span>
            <span class="nefo-sidebar-banner-row-link">
                <a href="/schnittstellen/produkte/workshops">'. t('Workshops') .'</a>
            </span>
        </div>
        <div class="nefo-sidebar-banner-row">
            <span class="nefo-sidebar-banner-row-img">
                <a href="/newsletter"><img src="'. $img_path .'/newsletter.png"></img></a>
            </span>
            <span class="nefo-sidebar-banner-row-link">
                <a href="/newsletter">'. t('Newsletter') .'</a>
            </span>
        </div>        
        <div class="nefo-sidebar-banner-row">
            <span class="nefo-sidebar-banner-row-img">
                <a href="/blogs"><img src="'. $img_path .'/blog.png"></img></a>
            </span>
            <span class="nefo-sidebar-banner-row-link">
                <a href="/blogs">'. t('NeFo Blogs') .'</a>
            </span>
        </div>
      </div>';
  
  return $output;
}

function _nefo_blocks_builder_nefo_feature_map_content() {
  $map_url = 'forschung/forschungsakteure/forschungsatlas';
  $image = array(
    '#theme' => 'image_formatter',
    '#item' => array(
      'uri' => 'public://products/slideshow/nefo_forschungsatlas_screenshoot_16-03-2016.jpg',
      'alt' => t('example image of research map.'),
    ),
    '#path' => array(
      'path' => $map_url,
      'options' => array('html' => TRUE), // Optional.
    ),
  );

  $block = array(
    'image' => array(
      '#type' => 'container',
      '#attributes' => array('class' => array('feature-map-img')),
      'content' => $image,
    ),
    'message' => array(
      '#type' => 'container',
      '#attributes' => array('class' =>array('feature-map-text')),
      'title' => array(
        '#type' => 'markup',
        '#markup' => '<h2>' . t('Feature') . '</h2>',
      ),
      'heading' => array(
        '#type' => 'markup',
        '#markup' => '<h3>' . t('Forschungsatlas') . '</h3>',
      ),
      'description' => array(
        '#type' => 'markup',
        '#markup' => '<p>' . t('Der NeFo Atlas der Forschungsakteure enth채lt aktuell '.
          '1200 Eintr채ge und 500 ForscherInnen Profile. Hier finden Sie die '.
          'passenden ExpertInnen f체r Ihre Fragen zur biologischen Vielfalt.') . '</p>',
      ),
      'button' => array(
        '#type' => 'container',
        '#attributes' => array('class' =>array('btn btn--blue')),
        'link#' =>array(
          '#type' => 'link',
          '#title' => t('zum Forschungsatlas'),
          '#href' => $map_url,
        ),
      ),
    ),
  );
  return $block;
}

// Biodivdersit채tsforschungs-Newsletter
function _nefo_newsletter2go_biodiv_news_content() {
    $output = '<form id="nl2go--form" action="https://app.newsletter2go.com/de/recipients/index/subscribe/" method="post" accept-charset="utf-8">
<table border="0"><tbody>
<tr><td align="left" style="padding-right: 8px">E-Mail*
    </td>
    <td>
        <input type="text" name="nl2go--mail" id="nl2go--mail" style="background: #f4f4f4; border: 1px solid #cccccc; padding: 2px; width: 250px;">
    </td>
</tr>
<tr><td align="left" style="padding-right: 8px">Vorname
    </td>
    <td>
        <input type="text" name="nl2go--firstname" id="nl2go--firstname" style="background: #f4f4f4; border: 1px solid #cccccc; padding: 2px; width: 250px;">
    </td>
</tr>
<tr><td align="left" style="padding-right: 8px">Nachname
    </td>
    <td>
        <input type="text" name="nl2go--lastname" id="nl2go--lastname" style="background: #f4f4f4; border: 1px solid #cccccc; padding: 2px; width: 250px;">
    </td>
</tr>
<tr><td align="left" style="padding-right: 8px">Institution
    </td>
    <td>
        <input type="text" name="nl2go--60805" id="nl2go--60805" style="background: #f4f4f4; border: 1px solid #cccccc; padding: 2px; width: 250px;">
    </td>
</tr>
<tr>
    <td>
    </td><td align="center"><input type="submit" value="Zum Newsletter anmelden" name="nl2go--submit" id="nl2go--submit" style="cursor: pointer; border: 1px solid rgb(169, 192, 65); border-radius: 3px 3px 3px 3px; font-weight: bold; text-align: center; color: rgb(255, 255, 255); background-color: rgb(169, 192, 65); background-image: -moz-linear-gradient(center top , rgb(169, 192, 65), rgb(169, 192, 65)); padding: 4px 8px;  font-size: 100%; margin-top: 8px;width: 100%;">
<input type="hidden" name="nl2go--key" id="nl2go--key" value="3e8f7bb4d0700aa8605dc2eadc318fadbc6ccd9932ef6fc12d84778fb6f5b10b$11630"><noscript><a href="https://www.newsletter2go.de/newsletter-erstellen/" title="Newsletter erstellen mit Newsletter2Go">Newsletter erstellen mit Newsletter2Go</a></noscript>
    </td>
</tr>
</tbody></table>
</form>';

    return $output;
}

// IPBES-Newsletter
function _nefo_newsletter2go_ipbes_news_content() {
    $output = '<form id="nl2go--form" action="https://app.newsletter2go.com/de/recipients/index/subscribe/" method="post" accept-charset="utf-8">
<table border="0"><tbody>
<tr><td align="left" style="padding-right: 8px">E-Mail*
    </td>
    <td>
        <input type="text" name="nl2go--mail" id="nl2go--mail" style="background: #f4f4f4; border: 1px solid #cccccc; padding: 2px; width: 250px;">
    </td>
</tr>
<tr><td align="left" style="padding-right: 8px">Vorname
    </td>
    <td>
        <input type="text" name="nl2go--firstname" id="nl2go--firstname" style="background: #f4f4f4; border: 1px solid #cccccc; padding: 2px; width: 250px;">
    </td>
</tr>
<tr><td align="left" style="padding-right: 8px">Nachname
    </td>
    <td>
        <input type="text" name="nl2go--lastname" id="nl2go--lastname" style="background: #f4f4f4; border: 1px solid #cccccc; padding: 2px; width: 250px;">
    </td>
</tr>
<tr><td align="left" style="padding-right: 8px">Institution
    </td>
    <td>
        <input type="text" name="nl2go--60805" id="nl2go--60805" style="background: #f4f4f4; border: 1px solid #cccccc; padding: 2px; width: 250px;">
    </td>
</tr>
<tr>
    <td>
    </td><td align="center"><input type="submit" value="Zum Newsletter anmelden" name="nl2go--submit" id="nl2go--submit" style="cursor: pointer; border: 1px solid rgb(169, 192, 65); border-radius: 3px 3px 3px 3px; font-weight: bold; text-align: center; color: rgb(255, 255, 255); background-color: rgb(169, 192, 65); background-image: -moz-linear-gradient(center top , rgb(169, 192, 65), rgb(169, 192, 65)); padding: 4px 8px;  font-size: 100%; margin-top: 8px;width: 100%;">
<input type="hidden" name="nl2go--key" id="nl2go--key" value="806875c0512e5dec868db1f00057ece9fba0eca0a3c4d73075b9ef6897e983f2$11629"><noscript><a href="https://www.newsletter2go.de/features/newsletter-versand/" title="Newsletter Versand mit Newsletter2Go">Newsletter Versand mit Newsletter2Go</a></noscript>
    </td>
</tr>
</tbody></table>
</form>';
    
    return $output;
}

// Presseverteiler
function _nefo_newsletter2go_press_news_content() {
    $output = '<form id="nl2go--form" action="https://app.newsletter2go.com/de/recipients/index/subscribe/" method="post" accept-charset="utf-8">
<table border="0"><tbody>
<tr><td align="left" style="padding-right: 8px">E-Mail*
    </td>
    <td>
        <input type="text" name="nl2go--mail" id="nl2go--mail" style="background: #f4f4f4; border: 1px solid #cccccc; padding: 2px; width: 250px;">
    </td>
</tr>
<tr><td align="left" style="padding-right: 8px">Vorname
    </td>
    <td>
        <input type="text" name="nl2go--firstname" id="nl2go--firstname" style="background: #f4f4f4; border: 1px solid #cccccc; padding: 2px; width: 250px;">
    </td>
</tr>
<tr><td align="left" style="padding-right: 8px">Nachname
    </td>
    <td>
        <input type="text" name="nl2go--lastname" id="nl2go--lastname" style="background: #f4f4f4; border: 1px solid #cccccc; padding: 2px; width: 250px;">
    </td>
</tr>
<tr><td align="left" style="padding-right: 8px">Institution
    </td>
    <td>
        <input type="text" name="nl2go--60805" id="nl2go--60805" style="background: #f4f4f4; border: 1px solid #cccccc; padding: 2px; width: 250px;">
    </td>
</tr>
<tr>
    <td>
    </td><td align="center"><input type="submit" value="Zum Presseverteiler anmelden" name="nl2go--submit" id="nl2go--submit" style="cursor: pointer; border: 1px solid rgb(169, 192, 65); border-radius: 3px 3px 3px 3px; font-weight: bold; text-align: center; color: rgb(255, 255, 255); background-color: rgb(169, 192, 65); background-image: -moz-linear-gradient(center top , rgb(169, 192, 65), rgb(169, 192, 65)); padding: 4px 8px;  font-size: 100%; margin-top: 8px;width: 100%;">
<input type="hidden" name="nl2go--key" id="nl2go--key" value="24305dcf21fdb8f36ff3507cfd40ebbf9bbaf4e6b40fbb2d2544ea2c8acf7306$11628"><noscript><a href="https://www.newsletter2go.de/newsletter-erstellen/" title="Newsletter erstellen mit Newsletter2Go">Newsletter erstellen mit Newsletter2Go</a></noscript>
    </td>
</tr>
</tbody></table>
</form>';
    
    return $output;
}

// Presseverteiler - Button only
function _nefo_newsletter2go_press_news_button_content() {
    $output = '<form id="nl2go--form" action="/presse/presseverteiler" method="post" accept-charset="utf-8">
<table border="0"><tbody>
<tr>
    <td align="center">
        <input type="submit" value="Zum Presseverteiler anmelden" name="nl2go--submit" id="nl2go--submit" style="cursor: pointer; border: 1px solid rgb(169, 192, 65); border-radius: 3px 3px 3px 3px; font-weight: bold; text-align: center; color: rgb(255, 255, 255); background-color: rgb(169, 192, 65); background-image: -moz-linear-gradient(center top , rgb(169, 192, 65), rgb(169, 192, 65)); padding: 4px 8px;  font-size: 100%; margin-top: 8px;width: 100%;">
    </td>
</tr>
</tbody></table>
</form>';
    
  return $output;
}

// Language Switch DE EN
function _nefo_blocks_builder_nefo_language_switch_content() {
  $output = '<ul class="menu">
<li class="first leaf"><a href="/de/" title="Deutsch">DE</a></li>
<li class="last leaf"><a href="/en/welcome" title="English">EN</a></li>
</ul>';

  return $output;
}
